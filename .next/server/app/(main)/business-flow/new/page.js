(()=>{var e={};e.id=815,e.ids=[815],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5315:e=>{"use strict";e.exports=require("path")},9462:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var l=a(3003),t=a(4293),r=a(6550),i=a.n(r),n=a(6979),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["(main)",{children:["business-flow",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7472)),"D:\\Code\\Business_Process_Management_Platform\\app\\(main)\\business-flow\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,8942)),"D:\\Code\\Business_Process_Management_Platform\\app\\(main)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,2075,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,6877)),"D:\\Code\\Business_Process_Management_Platform\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,2075,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Code\\Business_Process_Management_Platform\\app\\(main)\\business-flow\\new\\page.tsx"],x={require:a,loadChunk:()=>Promise.resolve()},m=new l.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/(main)/business-flow/new/page",pathname:"/business-flow/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9012:(e,s,a)=>{Promise.resolve().then(a.bind(a,3928))},3928:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var l=a(8819),t=a(7266),r=a(7843),i=a(8378),n=a(6557);let d=(0,n.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var c=a(1215),o=a(9513),x=a(3855),m=a(4019);let h=(0,n.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var p=a(772),u=a(4432),j=a(7673),g=a(2643),v=a(613),f=a(5842),b=a(4474);let y=[{id:1,name:"数据分析",type:"数据处理",description:"用于分析和处理数据的项目"},{id:2,name:"内容生成",type:"内容管理",description:"用于生成内容的项目"},{id:3,name:"审核流程",type:"内容管理",description:"用于审核内容的项目"},{id:4,name:"内容发布",type:"内容管理",description:"用于发布内容的项目"},{id:5,name:"数据采集",type:"数据处理",description:"用于采集数据的项目"},{id:6,name:"用户分析",type:"数据处理",description:"用于分析用户行为的项目"},{id:7,name:"内容营销",type:"营销",description:"用于内容营销的项目"}];function N(){let[e,s]=(0,t.useState)("新建业务流"),[a,n]=(0,t.useState)(""),[N,C]=(0,t.useState)(!1),[_,P]=(0,t.useState)(""),[k,z]=(0,t.useState)("all"),[Z,S]=(0,t.useState)([]),[M,q]=(0,t.useState)(!1),[R,F]=(0,t.useState)(null),A=y.filter(e=>{let s=e.name.includes(_)||e.description.includes(_),a="all"===k||e.type===k;return s&&a}),D=["all",...new Set(y.map(e=>e.type))],B=e=>{if(null!==R){let s=[...Z];s[R]=e,S(s),F(null)}else S([...Z,e]);q(!1)},I=e=>{S(Z.filter((s,a)=>a!==e))},V=e=>{F(e),q(!0)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{title:`流程设计: ${e}`,breadcrumb:[{label:"业务流",path:"/business-flow"},{label:e}]}),(0,l.jsxs)("div",{className:"p-6 lg:p-8",children:[(0,l.jsxs)("div",{className:"flex mb-4 justify-between",children:[(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsxs)(p.z,{variant:"outline",size:"sm",onClick:()=>C(!N),children:[(0,l.jsx)(i.Z,{className:"w-4 h-4 mr-1"})," 流程设置"]})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(p.z,{variant:"outline",size:"sm",children:[(0,l.jsx)(d,{className:"w-4 h-4 mr-1"})," 重置"]}),(0,l.jsxs)(p.z,{variant:"default",size:"sm",onClick:()=>{console.log("保存业务流:",{name:e,description:a,projects:Z}),alert("业务流保存成功！")},children:[(0,l.jsx)(c.Z,{className:"w-4 h-4 mr-1"})," 保存"]})]})]}),N&&(0,l.jsx)(g.Zb,{className:"mb-4",children:(0,l.jsx)(g.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(f._,{htmlFor:"flow-name",children:"业务流名称"}),(0,l.jsx)(u.I,{id:"flow-name",value:e,onChange:e=>s(e.target.value),className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(f._,{htmlFor:"flow-description",children:"业务流描述"}),(0,l.jsx)(j.g,{id:"flow-description",value:a,onChange:e=>n(e.target.value),className:"mt-1"})]})]})})}),(0,l.jsxs)("div",{className:"flex h-[calc(100vh-16rem)] bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[(0,l.jsxs)("aside",{className:"w-72 bg-slate-50 p-5 border-r border-gray-200 overflow-y-auto",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"可用项目"}),(0,l.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,l.jsx)(u.I,{type:"search",placeholder:"搜索可用项目...",value:_,onChange:e=>P(e.target.value)}),(0,l.jsxs)(b.Ph,{value:k,onValueChange:z,children:[(0,l.jsx)(b.i4,{children:(0,l.jsx)(b.ki,{placeholder:"选择项目类型"})}),(0,l.jsx)(b.Bw,{children:D.map(e=>(0,l.jsx)(b.Ql,{value:e,children:"all"===e?"所有类型":e},e))})]})]}),(0,l.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-25rem)]",children:(0,l.jsx)("ul",{className:"space-y-2",children:A.map(e=>(0,l.jsxs)("li",{className:"p-2 border rounded-md hover:bg-slate-100 transition-colors cursor-pointer flex items-center",onClick:()=>B(e),children:[(0,l.jsx)(o.Z,{className:"text-blue-500 mr-2 flex-shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.name}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:e.type})]})]},e.id))})})]}),(0,l.jsxs)("section",{className:"flex-1 flex flex-col",children:[(0,l.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-slate-50/50",children:[(0,l.jsxs)("h3",{className:"text-xl font-semibold text-gray-800",children:["流程设计: ",e]}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:a||"暂无描述"})]}),(0,l.jsx)("div",{className:"flex-1 bg-slate-100 relative p-5 overflow-auto",style:{backgroundImage:"radial-gradient(circle, #e0e0e0 1px, transparent 1.5px)",backgroundSize:"25px 25px"},children:0===Z.length?(0,l.jsxs)("div",{className:"text-center text-gray-400 absolute inset-0 flex flex-col items-center justify-center text-base",children:[(0,l.jsx)("p",{className:"mb-3",children:"从左侧选择项目或添加自定义项目来构建流程"}),(0,l.jsxs)(v.Vq,{open:M,onOpenChange:q,children:[(0,l.jsx)(v.hg,{asChild:!0,children:(0,l.jsxs)(p.z,{variant:"outline",children:[(0,l.jsx)(x.Z,{className:"w-4 h-4 mr-1"})," 添加自定义项目"]})}),(0,l.jsx)(w,{onAdd:B,onCancel:()=>q(!1),editProject:null!==R?Z[R]:null})]})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center w-full",children:[Z.map((e,s)=>(0,l.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200 w-full max-w-md relative group",children:[(0,l.jsxs)("div",{className:"absolute -right-2 -top-2 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,l.jsx)(p.z,{variant:"outline",size:"icon",className:"h-6 w-6 rounded-full bg-white",onClick:()=>V(s),children:(0,l.jsx)(i.Z,{className:"h-3 w-3"})}),(0,l.jsx)(p.z,{variant:"outline",size:"icon",className:"h-6 w-6 rounded-full bg-white",onClick:()=>I(s),children:(0,l.jsx)(m.Z,{className:"h-3 w-3"})})]}),(0,l.jsxs)("div",{className:"font-semibold",children:[s+1,". ",e.name]}),(0,l.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:e.type}),(0,l.jsx)("div",{className:"text-xs text-gray-600 mt-2",children:e.description})]}),s<Z.length-1&&(0,l.jsx)("div",{className:"my-2",children:(0,l.jsx)(h,{className:"text-gray-400"})})]},s)),(0,l.jsxs)(v.Vq,{open:M,onOpenChange:q,children:[(0,l.jsx)(v.hg,{asChild:!0,children:(0,l.jsxs)(p.z,{variant:"outline",className:"mt-6",children:[(0,l.jsx)(x.Z,{className:"w-4 h-4 mr-1"})," 添加项目"]})}),(0,l.jsx)(w,{onAdd:B,onCancel:()=>q(!1),editProject:null!==R?Z[R]:null})]})]})})]})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-3 p-2 bg-slate-100 rounded-md border border-slate-200",children:'提示：此处的项目节点来源于"项目开发"模块，可以根据实际需求选择适合的项目组合形成完整的业务流。'})]})]})}function w({onAdd:e,onCancel:s,editProject:a}){let[r,i]=(0,t.useState)(a?a.name:""),[n,d]=(0,t.useState)(a?a.type:""),[c,o]=(0,t.useState)(a?a.description:"");return(0,l.jsxs)(v.cZ,{className:"sm:max-w-md",children:[(0,l.jsx)(v.fK,{children:(0,l.jsx)(v.$N,{children:a?"编辑项目":"添加新项目"})}),(0,l.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(f._,{htmlFor:"project-name",children:"项目名称"}),(0,l.jsx)(u.I,{id:"project-name",value:r,onChange:e=>i(e.target.value)})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(f._,{htmlFor:"project-type",children:"项目类型"}),(0,l.jsx)(u.I,{id:"project-type",value:n,onChange:e=>d(e.target.value)})]}),(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(f._,{htmlFor:"project-description",children:"项目描述"}),(0,l.jsx)(j.g,{id:"project-description",value:c,onChange:e=>o(e.target.value)})]})]}),(0,l.jsxs)(v.cN,{children:[(0,l.jsx)(p.z,{variant:"outline",onClick:s,children:"取消"}),(0,l.jsx)(p.z,{onClick:()=>{e({id:a?a.id:Date.now(),name:r,type:n,description:c})},children:a?"保存":"添加"})]})]})}},7843:(e,s,a)=>{"use strict";a.d(s,{Z:()=>n});var l=a(8819),t=a(7266),r=a.n(t),i=a(434);let n=({title:e,breadcrumb:s=[]})=>(0,l.jsxs)("div",{className:"p-6 border-b bg-white",children:[s.length>0&&(0,l.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:s.map((e,s)=>(0,l.jsxs)(r().Fragment,{children:[s>0&&(0,l.jsx)("span",{className:"text-gray-400",children:"/"}),e.path?(0,l.jsx)(i.default,{href:e.path,className:"hover:text-blue-600 transition-colors",children:e.label}):(0,l.jsx)("span",{children:e.label})]},s))}),(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:e})]})},2643:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>n,Zb:()=>i,aY:()=>c,ll:()=>d});var l=a(8819),t=a(7266),r=a(7863);let i=t.forwardRef(({className:e,...s},a)=>(0,l.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm",e),...s}));i.displayName="Card";let n=t.forwardRef(({className:e,...s},a)=>(0,l.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let d=t.forwardRef(({className:e,...s},a)=>(0,l.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle",t.forwardRef(({className:e,...s},a)=>(0,l.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-slate-500",e),...s})).displayName="CardDescription";let c=t.forwardRef(({className:e,...s},a)=>(0,l.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",t.forwardRef(({className:e,...s},a)=>(0,l.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},3855:(e,s,a)=>{"use strict";a.d(s,{Z:()=>l});let l=(0,a(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8378:(e,s,a)=>{"use strict";a.d(s,{Z:()=>l});let l=(0,a(6557).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7472:(e,s,a)=>{"use strict";a.a(e,async(e,l)=>{try{a.r(s),a.d(s,{default:()=>e});var t=a(1851);let e=(await (0,t.createProxy)(String.raw`D:\Code\Business_Process_Management_Platform\app\(main)\business-flow\new\page.tsx`)).default;l()}catch(e){l(e)}},1)}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),l=s.X(0,[267,83,855,325,743,284,410],()=>a(9462));module.exports=l})();