(()=>{var e={};e.id=133,e.ids=[133],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5315:e=>{"use strict";e.exports=require("path")},2822:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>y,routeModule:()=>l,serverHooks:()=>p,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>f});var t={};s.r(t),s.d(t,{POST:()=>u});var n=s(2412),o=s(4293),a=s(4147),i=s(7856),c=s(7772);async function u(e){try{console.log("Business Flows batch API called");let r=await e.json();if(console.log("Received data:",r),!Array.isArray(r))return console.error("Invalid data format - not an array"),i.NextResponse.json({error:"Invalid request format. Expected an array of business flows."},{status:400});try{let e=await (0,c.u0)(),s=r.map(e=>({...e,id:`BF${Date.now()}_${Math.floor(1e4*Math.random())}`,detailPageId:`bf_detail_batch_${Date.now()}_${Math.floor(1e4*Math.random())}`,projects:0,resources:0,lastAccessed:new Date().toISOString(),children:[]}));return await (0,c.XG)([...e,...s]),console.log("Created business flows:",s),i.NextResponse.json({success:!0,businessFlows:s,count:s.length},{status:201})}catch(s){console.error("Service error:",s);let e=r.map((e,r)=>({...e,id:`TEMP_BF${Date.now()}_${r}`,detailPageId:`bf_detail_temp_${Date.now()}_${r}`,projects:0,resources:0,lastAccessed:new Date().toISOString(),children:[]}));return console.log("Created temp business flows:",e),i.NextResponse.json({success:!0,businessFlows:e,count:e.length},{status:201})}}catch(e){return console.error("Error batch creating business flows:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Failed to create business flows"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/feishu/business-flows/batch/route",pathname:"/api/feishu/business-flows/batch",filename:"route",bundlePath:"app/api/feishu/business-flows/batch/route"},resolvedPagePath:"D:\\Code\\Business_Process_Management_Platform\\app\\api\\feishu\\business-flows\\batch\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:d,workUnitAsyncStorage:f,serverHooks:p}=l;function y(){return(0,a.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:f})}},5303:()=>{},7772:(e,r,s)=>{"use strict";s.d(r,{Ye:()=>m,u0:()=>g,Ly:()=>P,ro:()=>x,Vq:()=>v,me:()=>h,i5:()=>S,XG:()=>j,DU:()=>$,pT:()=>F,lb:()=>_,G:()=>b});let t=require("fs");var n=s.n(t),o=s(5315),a=s.n(o);let i=a().join(process.cwd(),"data"),c=a().join(i,"frequentWebsites.json"),u=a().join(i,"businessFlow.json"),l=a().join(i,"documentAssistant.json"),d=a().join(i,"projectDevelopment.json"),f=a().join(i,"resourceLibrary.json"),p=a().join(i,"dashboard.json");async function y(e){try{if(!n().existsSync(e))return console.log(`File not found: ${e}, creating empty file`),n().writeFileSync(e,"[]","utf8"),[];let r=n().readFileSync(e,"utf8");if(!r.trim())return[];return JSON.parse(r)}catch(r){return console.error(`Error reading data from ${e}:`,r),[]}}async function w(e,r){try{n().writeFileSync(e,JSON.stringify(r,null,2),"utf8")}catch(r){throw console.error(`Error writing data to ${e}:`,r),r}}async function h(){return y(c)}async function b(e){return w(c,e)}async function g(){return y(u)}async function j(e){return w(u,e)}async function m(){return y(l)}async function S(e){return w(l,e)}async function x(){return y(d)}async function F(e){return w(d,e)}async function v(){return y(f)}async function _(e){return w(f,e)}async function P(){try{if(!n().existsSync(p)){console.log("Dashboard file not found, creating default");let e={stats:{businessFlows:0,projects:0,resources:0}};return n().writeFileSync(p,JSON.stringify(e,null,2),"utf8"),e}let e=n().readFileSync(p,"utf8");if(!e.trim())return{stats:{businessFlows:0,projects:0,resources:0}};return JSON.parse(e)}catch(e){return console.error("Error reading dashboard data:",e),{stats:{businessFlows:0,projects:0,resources:0}}}}async function $(e){try{n().writeFileSync(p,JSON.stringify(e,null,2),"utf8")}catch(e){throw console.error("Error writing dashboard data:",e),e}}n().existsSync(i)||n().mkdirSync(i,{recursive:!0}),Object.entries({[c]:"[]",[u]:"[]",[l]:"[]",[d]:"[]",[f]:"[]",[p]:"{}"}).forEach(([e,r])=>{n().existsSync(e)||(n().writeFileSync(e,r,"utf8"),console.log(`Initialized ${e}`))})}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[267,814],()=>s(2822));module.exports=t})();