(()=>{var e={};e.id=764,e.ids=[764],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5315:e=>{"use strict";e.exports=require("path")},8841:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>h,routeModule:()=>d,serverHooks:()=>y,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>p});var n={};t.r(n),t.d(n,{GET:()=>c,POST:()=>l});var s=t(2412),o=t(4293),i=t(4147),a=t(7856),u=t(7772);async function c(){try{let e=await (0,u.u0)();return a.NextResponse.json(e)}catch(e){return console.error("Error fetching business flows:",e),a.NextResponse.json({error:"Failed to fetch business flows"},{status:500})}}async function l(e){try{let r=await e.json();if(!r.name)return a.NextResponse.json({error:"Name is a required field"},{status:400});let t=`BF${Date.now()}${Math.floor(1e4*Math.random())}`,n={id:t,name:r.name,description:r.description||"",detailPageId:`bf_detail_${t}`,parentId:r.parentId,projects:0,resources:0,lastAccessed:new Date().toISOString(),children:[]},s=await (0,u.u0)();if(r.parentId){let e=!1,t=s=>s.map(s=>s.id===r.parentId?(e=!0,{...s,children:[...s.children||[],n]}):s.children&&s.children.length>0?{...s,children:t(s.children)}:s),o=t(s);e?await (0,u.XG)(o):(console.warn(`Parent ID ${r.parentId} not found. Adding to root level.`),await (0,u.XG)([...s,n]))}else await (0,u.XG)([...s,n]);return a.NextResponse.json(n)}catch(e){return console.error("Error creating business flow:",e),a.NextResponse.json({error:"Failed to create business flow"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/feishu/business-flows/route",pathname:"/api/feishu/business-flows",filename:"route",bundlePath:"app/api/feishu/business-flows/route"},resolvedPagePath:"D:\\Code\\Business_Process_Management_Platform\\app\\api\\feishu\\business-flows\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:f,workUnitAsyncStorage:p,serverHooks:y}=d;function h(){return(0,i.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:p})}},5303:()=>{},7772:(e,r,t)=>{"use strict";t.d(r,{Ye:()=>x,u0:()=>g,Ly:()=>q,ro:()=>S,Vq:()=>v,me:()=>w,i5:()=>b,XG:()=>m,DU:()=>O,pT:()=>F,lb:()=>N,G:()=>j});let n=require("fs");var s=t.n(n),o=t(5315),i=t.n(o);let a=i().join(process.cwd(),"data"),u=i().join(a,"frequentWebsites.json"),c=i().join(a,"businessFlow.json"),l=i().join(a,"documentAssistant.json"),d=i().join(a,"projectDevelopment.json"),f=i().join(a,"resourceLibrary.json"),p=i().join(a,"dashboard.json");async function y(e){try{if(!s().existsSync(e))return console.log(`File not found: ${e}, creating empty file`),s().writeFileSync(e,"[]","utf8"),[];let r=s().readFileSync(e,"utf8");if(!r.trim())return[];return JSON.parse(r)}catch(r){return console.error(`Error reading data from ${e}:`,r),[]}}async function h(e,r){try{s().writeFileSync(e,JSON.stringify(r,null,2),"utf8")}catch(r){throw console.error(`Error writing data to ${e}:`,r),r}}async function w(){return y(u)}async function j(e){return h(u,e)}async function g(){return y(c)}async function m(e){return h(c,e)}async function x(){return y(l)}async function b(e){return h(l,e)}async function S(){return y(d)}async function F(e){return h(d,e)}async function v(){return y(f)}async function N(e){return h(f,e)}async function q(){try{if(!s().existsSync(p)){console.log("Dashboard file not found, creating default");let e={stats:{businessFlows:0,projects:0,resources:0}};return s().writeFileSync(p,JSON.stringify(e,null,2),"utf8"),e}let e=s().readFileSync(p,"utf8");if(!e.trim())return{stats:{businessFlows:0,projects:0,resources:0}};return JSON.parse(e)}catch(e){return console.error("Error reading dashboard data:",e),{stats:{businessFlows:0,projects:0,resources:0}}}}async function O(e){try{s().writeFileSync(p,JSON.stringify(e,null,2),"utf8")}catch(e){throw console.error("Error writing dashboard data:",e),e}}s().existsSync(a)||s().mkdirSync(a,{recursive:!0}),Object.entries({[u]:"[]",[c]:"[]",[l]:"[]",[d]:"[]",[f]:"[]",[p]:"{}"}).forEach(([e,r])=>{s().existsSync(e)||(s().writeFileSync(e,r,"utf8"),console.log(`Initialized ${e}`))})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[267,814],()=>t(8841));module.exports=n})();