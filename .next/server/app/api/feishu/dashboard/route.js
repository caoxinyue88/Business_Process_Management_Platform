(()=>{var r={};r.id=362,r.ids=[362],r.modules={399:r=>{"use strict";r.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:r=>{"use strict";r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:r=>{"use strict";r.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:r=>{"use strict";r.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5315:r=>{"use strict";r.exports=require("path")},3265:(r,e,t)=>{"use strict";t.r(e),t.d(e,{patchFetch:()=>j,routeModule:()=>p,serverHooks:()=>h,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>y});var n={};t.r(n),t.d(n,{GET:()=>d,PUT:()=>l});var s=t(2412),o=t(4293),a=t(4147),i=t(7856),u=t(7772);let c=(r,e)=>{console.log(`[Dashboard API] ${r}`,e?JSON.stringify(e):"")};async function d(){try{c("Fetching dashboard data");let r=await (0,u.Ly)();return i.NextResponse.json(r)}catch(r){return console.error("Error fetching dashboard data:",r),i.NextResponse.json({error:"Failed to fetch dashboard data"},{status:500})}}async function l(r){try{let e=await r.json();return c("Updating dashboard with data:",e),await (0,u.DU)(e),c("Updated dashboard"),i.NextResponse.json({success:!0,dashboard:e})}catch(r){return console.error("Error updating dashboard:",r),i.NextResponse.json({error:"Failed to update dashboard"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/feishu/dashboard/route",pathname:"/api/feishu/dashboard",filename:"route",bundlePath:"app/api/feishu/dashboard/route"},resolvedPagePath:"D:\\Code\\Business_Process_Management_Platform\\app\\api\\feishu\\dashboard\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:f,workUnitAsyncStorage:y,serverHooks:h}=p;function j(){return(0,a.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:y})}},5303:()=>{},7772:(r,e,t)=>{"use strict";t.d(e,{Ye:()=>x,u0:()=>g,Ly:()=>q,ro:()=>m,Vq:()=>v,me:()=>j,i5:()=>S,XG:()=>w,DU:()=>E,pT:()=>F,lb:()=>N,G:()=>b});let n=require("fs");var s=t.n(n),o=t(5315),a=t.n(o);let i=a().join(process.cwd(),"data"),u=a().join(i,"frequentWebsites.json"),c=a().join(i,"businessFlow.json"),d=a().join(i,"documentAssistant.json"),l=a().join(i,"projectDevelopment.json"),p=a().join(i,"resourceLibrary.json"),f=a().join(i,"dashboard.json");async function y(r){try{if(!s().existsSync(r))return console.log(`File not found: ${r}, creating empty file`),s().writeFileSync(r,"[]","utf8"),[];let e=s().readFileSync(r,"utf8");if(!e.trim())return[];return JSON.parse(e)}catch(e){return console.error(`Error reading data from ${r}:`,e),[]}}async function h(r,e){try{s().writeFileSync(r,JSON.stringify(e,null,2),"utf8")}catch(e){throw console.error(`Error writing data to ${r}:`,e),e}}async function j(){return y(u)}async function b(r){return h(u,r)}async function g(){return y(c)}async function w(r){return h(c,r)}async function x(){return y(d)}async function S(r){return h(d,r)}async function m(){return y(l)}async function F(r){return h(l,r)}async function v(){return y(p)}async function N(r){return h(p,r)}async function q(){try{if(!s().existsSync(f)){console.log("Dashboard file not found, creating default");let r={stats:{businessFlows:0,projects:0,resources:0}};return s().writeFileSync(f,JSON.stringify(r,null,2),"utf8"),r}let r=s().readFileSync(f,"utf8");if(!r.trim())return{stats:{businessFlows:0,projects:0,resources:0}};return JSON.parse(r)}catch(r){return console.error("Error reading dashboard data:",r),{stats:{businessFlows:0,projects:0,resources:0}}}}async function E(r){try{s().writeFileSync(f,JSON.stringify(r,null,2),"utf8")}catch(r){throw console.error("Error writing dashboard data:",r),r}}s().existsSync(i)||s().mkdirSync(i,{recursive:!0}),Object.entries({[u]:"[]",[c]:"[]",[d]:"[]",[l]:"[]",[p]:"[]",[f]:"{}"}).forEach(([r,e])=>{s().existsSync(r)||(s().writeFileSync(r,e,"utf8"),console.log(`Initialized ${r}`))})}};var e=require("../../../../webpack-runtime.js");e.C(r);var t=r=>e(e.s=r),n=e.X(0,[267,814],()=>t(3265));module.exports=n})();