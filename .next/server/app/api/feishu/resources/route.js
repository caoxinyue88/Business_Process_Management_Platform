(()=>{var e={};e.id=142,e.ids=[142],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5315:e=>{"use strict";e.exports=require("path")},4746:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>w,routeModule:()=>y,serverHooks:()=>g,workAsyncStorage:()=>j,workUnitAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{DELETE:()=>f,GET:()=>l,POST:()=>d,PUT:()=>p});var n=t(2412),o=t(4293),i=t(4147),u=t(7856),a=t(7772);let c=(e,r)=>{console.log(`[Resources API] ${e}`,r?JSON.stringify(r):"")};async function l(){try{c("Fetching all resources");let e=await (0,a.Vq)();return c(`Retrieved ${e.length} resources`),u.NextResponse.json({resources:e})}catch(e){return console.error("Error fetching resources:",e),u.NextResponse.json({error:"Failed to fetch resources"},{status:500})}}async function d(e){try{let r=await e.json();if(console.log("Creating resource with data:",r),!r.name||!r.type)return u.NextResponse.json({error:"Name and type are required fields"},{status:400});let t=`R${Date.now()}${Math.floor(1e3*Math.random())}`,s={...r,id:t},n=await (0,a.Vq)();return n.push(s),await (0,a.lb)(n),console.log("Created resource:",s),u.NextResponse.json(s)}catch(e){return console.error("Error creating resource:",e),u.NextResponse.json({error:"Failed to create resource"},{status:500})}}async function p(e){try{let{id:r,...t}=await e.json();if(c(`Updating resource ID: ${r}`),!r)return u.NextResponse.json({error:"Resource ID is required"},{status:400});let s=await (0,a.Vq)(),n=s.findIndex(e=>e.id===r);if(-1===n)return u.NextResponse.json({error:`Resource with ID ${r} not found`},{status:404});let o=s[n],i=Object.assign({},o,t);return s[n]=i,await (0,a.lb)(s),u.NextResponse.json(i)}catch(e){return console.error("Error updating resource:",e),u.NextResponse.json({error:"Failed to update resource"},{status:500})}}async function f(e){try{let{id:r}=await e.json();if(c(`Deleting resource ID: ${r}`),!r)return u.NextResponse.json({error:"Resource ID is required"},{status:400});let t=await (0,a.Vq)(),s=t.filter(e=>e.id!==r);if(t.length===s.length)return u.NextResponse.json({error:`Resource with ID ${r} not found`},{status:404});return await (0,a.lb)(s),u.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting resource:",e),u.NextResponse.json({error:"Failed to delete resource"},{status:500})}}let y=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/feishu/resources/route",pathname:"/api/feishu/resources",filename:"route",bundlePath:"app/api/feishu/resources/route"},resolvedPagePath:"D:\\Code\\Business_Process_Management_Platform\\app\\api\\feishu\\resources\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:j,workUnitAsyncStorage:h,serverHooks:g}=y;function w(){return(0,i.patchFetch)({workAsyncStorage:j,workUnitAsyncStorage:h})}},5303:()=>{},7772:(e,r,t)=>{"use strict";t.d(r,{Ye:()=>R,u0:()=>w,Ly:()=>q,ro:()=>S,Vq:()=>F,me:()=>h,i5:()=>m,XG:()=>x,DU:()=>v,pT:()=>N,lb:()=>b,G:()=>g});let s=require("fs");var n=t.n(s),o=t(5315),i=t.n(o);let u=i().join(process.cwd(),"data"),a=i().join(u,"frequentWebsites.json"),c=i().join(u,"businessFlow.json"),l=i().join(u,"documentAssistant.json"),d=i().join(u,"projectDevelopment.json"),p=i().join(u,"resourceLibrary.json"),f=i().join(u,"dashboard.json");async function y(e){try{if(!n().existsSync(e))return console.log(`File not found: ${e}, creating empty file`),n().writeFileSync(e,"[]","utf8"),[];let r=n().readFileSync(e,"utf8");if(!r.trim())return[];return JSON.parse(r)}catch(r){return console.error(`Error reading data from ${e}:`,r),[]}}async function j(e,r){try{n().writeFileSync(e,JSON.stringify(r,null,2),"utf8")}catch(r){throw console.error(`Error writing data to ${e}:`,r),r}}async function h(){return y(a)}async function g(e){return j(a,e)}async function w(){return y(c)}async function x(e){return j(c,e)}async function R(){return y(l)}async function m(e){return j(l,e)}async function S(){return y(d)}async function N(e){return j(d,e)}async function F(){return y(p)}async function b(e){return j(p,e)}async function q(){try{if(!n().existsSync(f)){console.log("Dashboard file not found, creating default");let e={stats:{businessFlows:0,projects:0,resources:0}};return n().writeFileSync(f,JSON.stringify(e,null,2),"utf8"),e}let e=n().readFileSync(f,"utf8");if(!e.trim())return{stats:{businessFlows:0,projects:0,resources:0}};return JSON.parse(e)}catch(e){return console.error("Error reading dashboard data:",e),{stats:{businessFlows:0,projects:0,resources:0}}}}async function v(e){try{n().writeFileSync(f,JSON.stringify(e,null,2),"utf8")}catch(e){throw console.error("Error writing dashboard data:",e),e}}n().existsSync(u)||n().mkdirSync(u,{recursive:!0}),Object.entries({[a]:"[]",[c]:"[]",[l]:"[]",[d]:"[]",[p]:"[]",[f]:"{}"}).forEach(([e,r])=>{n().existsSync(e)||(n().writeFileSync(e,r,"utf8"),console.log(`Initialized ${e}`))})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[267,814],()=>t(4746));module.exports=s})();